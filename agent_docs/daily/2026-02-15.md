# 2026년 2월 15일: 데이터 저장 안정화 및 내부 검색 시스템 구축

**핵심 목표:** 데이터 저장 이슈를 해결하고, 사용자 경험 향상을 위해 내부 데이터베이스 기반의 실시간 검색(Autocomplete) 시스템을 구축합니다.

## 1. 데이터 저장 안정화 (완료)
- **문제 해결**: MusicBrainz API 과부하로 인한 트랜잭션 롤백 문제를 해결하기 위해 이미지 수집을 중단하고 곡 단위 커밋을 도입했습니다.
- **결과**: 안정적으로 데이터가 수집되어 현재 약 400곡, 290명의 인물 데이터가 확보되었습니다.

## 2. 내부 검색 시스템 구축 (진행 예정)
프론트엔드에서 사용자가 아티스트나 곡을 검색할 때, 외부 API가 아닌 **내부 DB**를 대상으로 검색하여 즉각적인 반응을 제공하는 시스템을 구축합니다.

### 2.1. 백엔드 (Backend)
- **API 엔드포인트**: `GET /search?q={query}`
    - **기능**: 쿼리 파라미터 `q`를 받아 아티스트 이름(`Person.name`)과 곡 제목(`Song.title`)에서 부분 일치(`LIKE %q%`)하는 항목을 검색합니다.
    - **최적화**: 자동완성(Autocomplete) 용도이므로, 필요한 최소한의 데이터(ID, 이름, 이미지, 타입)만 반환하여 응답 속도를 극대화합니다.
- **구현 예정 파일**:
    - `backend/app/crud.py`: `search_persons`, `search_songs` 함수 추가.
    - `backend/app/main.py`: `/search` 엔드포인트 추가 및 통합 응답 구조 정의.

### 2.2. 프론트엔드 (Frontend)
- **UI 컴포넌트**: `SearchBar.jsx` 고도화
    - **기능**: 입력창에 검색어 입력 시, 하단에 연관된 아티스트/곡 목록을 드롭다운 형태로 실시간 표시(Live Search).
    - **성능**: `useDebounce` 훅을 도입하여 사용자의 키 입력이 멈춘 후(예: 300ms) API를 호출하도록 하여 불필요한 요청을 방지합니다.
    - **인터랙션**: 검색 결과 항목 클릭 시, 해당 아티스트/곡의 ID(`mbid`)를 이용해 그래프를 로드하고 포커스를 이동합니다.

---