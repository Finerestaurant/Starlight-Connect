# Genius API를 이용한 데이터 수집 계획

**목표:** `genius.com`의 공식 API를 체계적으로 활용하여 노래 및 참여 인력(Credit) 정보를 수집하고, 프로젝트 데이터베이스를 지속적으로 확장합니다.

---

### **1단계: 시작 아티스트의 ID 확보**

*   **API 엔드포인트:** `GET /genius/search` (우리가 만든 백엔드 엔드포인트)
*   **수행 작업:**
    1.  탐험을 시작할 아티스트를 선정합니다. (예: `IU`)
    2.  선정한 아티스트 이름으로 위 엔드포인트에 검색을 요청합니다. (예: `GET /genius/search?q=IU`)
    3.  검색 결과에서, 원하는 아티스트의 `primary_artist.id` 값을 확인하여 아티스트의 Genius ID를 확보합니다. (예: `264991`)

---

### **2단계: 아티스트의 전체 노래 목록 수집**

*   **API 엔드포인트:** `GET /artists/{id}/songs` (Genius API 직접 호출)
*   **수행 작업 (자동화 스크립트):**
    1.  1단계에서 확보한 아티스트 ID를 사용하여 위 Genius API 엔드포인트를 호출합니다.
    2.  API는 해당 아티스트의 모든 노래 목록을 JSON 형태로 반환합니다. 이 응답에는 각 노래의 제목, Genius ID 등이 포함되어 있습니다.
    3.  응답받은 노래 목록을 순회할 준비를 합니다. (페이지네이션이 필요할 수 있으므로, 여러 페이지를 가져오는 로직을 구현해야 합니다.)

---

### **3단계: 노래별 상세 정보 및 Credits 임포트**

*   **API 엔드포인트:** `POST /import/genius_song` (우리가 만든 백엔드 엔드포인트)
*   **수행 작업 (자동화 스크립트):**
    1.  2단계에서 수집한 모든 노래에 대해, 각 노래의 Genius ID를 가져옵니다.
    2.  가져온 ID를 사용하여 위 엔드포인트에 `{"genius_song_id": id}` 형식으로 `POST` 요청을 보냅니다.
    3.  요청을 받은 우리 백엔드는 다음의 모든 과정을 자동으로 처리합니다.
        *   Genius API의 `GET /songs/{id}`를 호출하여 상세 정보를 가져옵니다.
        *   응답에서 `title`, `artist`, `album`, `release_date`, `writer_artists`, `producer_artists` 등 상세 정보를 파싱합니다.
        *   파싱된 정보를 우리 데이터베이스 스키마에 맞게 변환합니다.
        *   로컬 데이터베이스(`kpop.db`)에 노래, 인물, 기여 정보를 최종적으로 저장합니다.

---

### **4. 지속적인 탐험 및 데이터베이스 확장**

하나의 아티스트에서 멈추지 않고, 관련된 인물들로 탐험을 계속 확장해 나갑니다.

*   **수행 작업 (자동화 스크립트):**
    1.  일정 주기로 우리 데이터베이스에서 "탐험되지 않은" 인물(다른 노래에 참여했지만, 아직 그 인물의 전체 노래 목록은 수집하지 않은 경우)을 선택합니다.
    2.  해당 인물의 이름으로 `GET /genius/search`를 호출하여 Genius 아티스트 ID를 획득합니다.
    3.  이 ID를 '탐험할 아티스트 큐(Queue)'에 추가하고, 2단계부터 다시 프로세스를 반복합니다.

---

### **자동화 스크립트(크롤러) 기술 스택**

*   **언어:** Python
*   **핵심 라이브러리:**
    *   `requests`: 우리 백엔드 API 및 Genius API와 통신하기 위함.
*   **제외된 라이브러리:**
    *   `BeautifulSoup4`, `Selenium`: 더 이상 웹페이지를 직접 파싱할 필요가 없으므로 사용하지 않습니다.